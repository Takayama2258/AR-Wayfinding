{"version":3,"sources":["components/AppContext.js","components/Picture.js","images/location.png","images/locationNew.png","components/Home/Home.js","components/Camera/ThreexComp.js","components/Camera/Camera.js","components/Dashboard/Dashboard.js","App.js","reportWebVitals.js","index.js"],"names":["AppContext","React","createContext","angle","settingAngle","forwardRef","useImperativeHandle","Picture","props","ref","source","destination","fetchInitialLabels","fetch","then","res","json","data","console","log","prevNode","nodes","label","imgSpot","x","Latitude","y","Longitude","drawInitialLabels","createPoints","catch","error","imgEl","document","getElementById","img_x","locationLeft","img_y","locationTop","img_width","offsetWidth","img_height","offsetHeight","addHotspot","firstPoint","secondPoint","xPoint","YPoint","lineLength","Math","sqrt","pow","calcLine","x1","y1","x2","y2","z","cos","radina","acos","PI","getAngle","lineHtmlStr","$","append","element","offsetTotal","offsetLeft","tagName","offsetParent","offsetTop","displaySpot","fetchType","imgEle","src","createImagElement","onFetchLabel","id","style","width","height","onClick","e","xPage","navigator","appName","pageX","event","body","scrollLeft","yPage","pageY","scrollTop","prop","alt","Header","Layout","Content","Footer","withRouter","useParams","useState","dest","setDest","visibility","show","setShow","useContext","childRef","useRef","className","padding","minHeight","value","onChange","target","method","Angle","current","icon","CameraOutlined","window","location","href","textAlign","ThreexComp","state","this","ArToolkitContext","baseURL","renderer","THREE","antialias","alpha","setClearColor","setSize","innerWidth","innerHeight","domElement","position","top","left","appendChild","onRenderFcts","scene","camera","add","artoolkitProfile","ArToolkitProfile","sourceWebcam","arToolkitSource","ArToolkitSource","sourceParameters","onResize","onResizeElement","copyElementSizeTo","arToolkitContext","arController","canvas","init","addEventListener","cameraParametersUrl","detectionMode","projectionMatrix","copy","getProjectionMatrix","push","ready","update","markerGroup","ArMarkerControls","type","patternUrl","model","markerScene","GLTFLoader","load","gltf","scale","set","rotation","xhr","loaded","total","render","lastTimeMsec","requestAnimationFrame","animate","nowMsec","deltaMsec","min","forEach","onRenderFct","mount","Component","loc","setLoc","history","App","setAngle","v","exact","path","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.d16d5412.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const AppContext = React.createContext({\n    angle: 0,\n    settingAngle: () => {},\n  });","import React from \"react\";\nimport $ from 'jquery' ;\nimport locationIcon from '../images/location.png';\nimport locationIconNew from '../images/locationNew.png'\n\nconst { forwardRef, useImperativeHandle } = React;\n\nconst Picture = forwardRef((props, ref) => {\n\n  // get source & dest\n  const {source, destination} = props;\n\n  useImperativeHandle(ref, () => ({\n    onFetchLabel(){\n      console.log('onFetchLabel');\n      fetchInitialLabels();\n    }\n    }));\n\n  function onFetchLabel() {\n    fetchInitialLabels();\n    drawInitialLabels();\n  }\n  //initialize fetch\n  function fetchInitialLabels(){\n    fetch( `https://fyp21043s1.cs.hku.hk:8080/v1/api/path?source=${source}&destination=${destination}`)\n    .then(res => res.json())\n    .then(data => {\n      console.log(data['data']['Path']);\n      let nodes = data['data']['Path'];\n      // let nodes = [{Id: 1, IntersectionalAngle: 0, Latitude: 0, Longitude: 0},{Id: 2, IntersectionalAngle: 0, Latitude: 1, Longitude: 1}];\n      let prevNode;\n      for (let label in nodes){\n        let imgSpot = {x: nodes[label].Latitude, y:nodes[label].Longitude}\n        drawInitialLabels(imgSpot);\n        if(prevNode){\n          console.log('prevNode:',prevNode)\n          createPoints(prevNode,imgSpot);\n        }\n        prevNode=imgSpot;\n      }\n    })\n    .catch((error) => {\n      console.error(\"Error fetching data: \", error);\n    })\n  }\n\n  function drawInitialLabels(imgSpot) {\n    let imgEl = document.getElementById(\"imageId\");\n    let img_x = locationLeft(imgEl);\n    let img_y = locationTop(imgEl);\n    let img_width = imgEl.offsetWidth;\n    let img_height = imgEl.offsetHeight;\n    var displaySpot = {x: imgSpot.x*img_width+img_x, y: imgEl.offsetHeight-imgSpot.y*img_height+img_y};\n    addHotspot(displaySpot,imgSpot,true);\n  }\n\n\n  //draw connections\n  function createPoints(source,destination) {\n    let firstPoint = null;\n    let secondPoint = null;\n    let imgEl = document.getElementById(\"imageId\");\n    let img_width = imgEl.offsetWidth;\n    let img_height = imgEl.offsetHeight;\n    let img_x = locationLeft(imgEl);\n    let img_y = locationTop(imgEl);\n    if (!firstPoint) {\n      firstPoint = {};\n      firstPoint.xPoint = source['x']*img_width+img_x;\n      firstPoint.YPoint = imgEl.offsetHeight-source['y']*img_height+img_y;\n    }\n    if (!secondPoint) {\n      secondPoint = {};\n      secondPoint.xPoint = destination['x']*img_width+img_x;\n      secondPoint.YPoint = imgEl.offsetHeight-destination['y']*img_height+img_y;\n    }\n    if (firstPoint !== null && secondPoint !== null) {\n      let lineLength = calcLine(firstPoint, secondPoint);\n      let angle = getAngle(\n          firstPoint.xPoint,\n          firstPoint.YPoint,\n          secondPoint.xPoint,\n          secondPoint.YPoint\n      );\n      // 设置一个div 宽度为 两点之间的距离，并且以 transform-origin: 0 50% 为圆心旋转，角度已经算出来\n      let lineHtmlStr = `<div style=\"position:absolute;border-top: 1px solid red;width:${lineLength}px;top:${firstPoint.YPoint}px;left:${firstPoint.xPoint}px;transform:rotate(${angle}deg);transform-origin: 0 50%;\"></div>`;\n      $('.container').append(lineHtmlStr);\n    }\n  }\n  function calcLine(firstPoint, secondPoint) {\n    // 计算出两个点之间的距离\n    let line = Math.sqrt(\n        Math.pow(firstPoint.xPoint - secondPoint.xPoint, 2) +\n        Math.pow(firstPoint.YPoint - secondPoint.YPoint, 2)\n    );\n    return line;\n  }\n  function getAngle(x1, y1, x2, y2) {\n    // 获得人物中心和鼠标坐标连线，与y轴正半轴之间的夹角\n    var x = x1 - x2;\n    var y = y1 - y2;\n    var z = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\n    var cos = y / z;\n    var radina = Math.acos(cos); // 用反三角函数求弧度\n    var angle = 180 / (Math.PI / radina); // 将弧度转换成角度\n    if (x2 > x1 && y2 === y1) {\n      // 在x轴正方向上\n      angle = 0;\n    }\n    if (x2 > x1 && y2 < y1) {\n      // 在第一象限;\n      angle = angle - 90;\n    }\n    if (x2 === x1 && y1 > y2) {\n      // 在y轴正方向上\n      angle = -90;\n    }\n    if (x2 < x1 && y2 < y1) {\n      // 在第二象限\n      angle = 270 - angle;\n    }\n    if (x2 < x1 && y2 === y1) {\n      // 在x轴负方向\n      angle = 180;\n    }\n    if (x2 < x1 && y2 > y1) {\n      // 在第三象限\n      angle = 270 - angle;\n    }\n    if (x2 === x1 && y2 > y1) {\n      // 在y轴负方向上\n      angle = 90;\n    }\n    if (x2 > x1 && y2 > y1) {\n      // 在四象限\n      angle = angle - 90;\n    }\n    return angle;\n  }\n\n\n\n  function handleClick(e) {\n    console.log('clicked');\n    // eslint-disable-next-line no-restricted-globals\n    var xPage = (navigator.appName == 'Netscape') ? e.pageX : event.x + document.body.scrollLeft;\n    // eslint-disable-next-line no-restricted-globals\n    var yPage = (navigator.appName == 'Netscape') ? e.pageY : event.y + document.body.scrollTop;\n    // 当前点击位置\n    var displaySpot = {x: xPage, y: yPage};\n\n    let imgEl = document.getElementById(\"imageId\");\n    let height = $('imageId').prop(\"height\")\n\n    let img_x = locationLeft(imgEl);\n    let img_y = locationTop(imgEl);\n    var imgSpot = {x: xPage-img_x, y:imgEl.offsetHeight-yPage+img_y};\n    console.log(img_x, ':::', img_y);\n\n    addHotspot(displaySpot,imgSpot,false);\n  }\n  // 找到元素的屏幕位置\n  function locationLeft(element) {\n    var offsetTotal = element.offsetLeft;\n    var scrollTotal = 0; // element.scrollLeft but we dont want to deal with scrolling - already in page coords\n    if (element.tagName != \"BODY\") {\n      if (element.offsetParent != null)\n        return offsetTotal + scrollTotal + locationLeft(element.offsetParent);\n    }\n    return offsetTotal + scrollTotal;\n  }\n\n// 找到元素的屏幕位置\n  function locationTop(element) {\n    var offsetTotal = element.offsetTop;\n    var scrollTotal = 0; // element.scrollTop but we dont want to deal with scrolling - already in page coords\n    if (element.tagName != \"BODY\") {\n      if (element.offsetParent != null)\n        return offsetTotal + scrollTotal + locationTop(element.offsetParent);\n    }\n    return offsetTotal + scrollTotal;\n  }\n\n  function createImagElement(displaySpot,fetchType) {\n    var x = displaySpot.x -15;\n    var y = displaySpot.y -30;\n    var width = 30;\n    var height = 30;\n    if (fetchType){\n      var src = locationIcon;\n    }else{\n      var src = locationIconNew;\n    }\n\n    let imgEle = '<img ' + ' class=\"' + 'label' + '\" '+' src=\"' + src + '\"  style=\"top: '\n        + y + 'px; left: ' + x + 'px; width: ' + width + 'px; height: ' + height + 'px;  position: absolute; cursor: pointer;\"'\n        + ')\" />';\n    return imgEle\n  }\n\n  // 添加自定义内容\n  function addHotspot(displaySpot,imgSpot,fetchType) {\n    let imgEle = createImagElement(displaySpot,fetchType);\n    // let textEle = createCoordinateElement(displaySpot,imgSpot);\n    // labels.push('{'+imgSpot.x+','+imgSpot.y+'}');\n    $('.container').append(imgEle);\n    // $('.container').append(textEle);\n    // setLabel([...labels]);\n  }\n\n  return (\n    <>\n    <div id=\"imageId\" style={{ width:'100%',height:'100%'}} onClick={handleClick}>\n      <img alt=\"map\" src=\"https://innowings.engg.hku.hk/content/uploads/2020/06/LG.png\" style={{width:'100%'}}/>\n    </div>\n    </>\n  )\n});\n\nexport default Picture","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { Layout, Button } from 'antd';\nimport './Home.css';\nimport { CameraOutlined} from '@ant-design/icons';\nimport React, {useContext, useState, useRef} from \"react\";\n\nimport { AppContext } from \"../AppContext\";\nimport Picture from '../Picture';\nimport ReactDOM from 'react-dom';\n\nimport {\n  useParams,\n  withRouter\n} from \"react-router-dom\";\n\nconst { Header, Content, Footer } = Layout;\n\n\nconst Home =(props)=>{\n\n  const { id } = useParams();\n\n  const [dest, setDest] = useState('0');\n  const [show, setShow] = useState({visibility:'hidden'});\n  const {angle, settingAngle} = useContext(AppContext);\n\n  const childRef = useRef();\n\n  // 获取目标方位\n  const handleClick = () => {\n    // 数据库\n    fetch( `https://fyp21043s1.cs.hku.hk:8080/v1/api/search?source=${id}&destination=${dest}`, { method: \"GET\"})\n    .then(res => res.json())\n    .then(data => {\n      settingAngle(data.data.Angle);\n        console.log(data.data.Angle);\n    })\n    .catch((error) => {\n      console.error(\"Error fetching data: \", error);\n    })\n\n    setShow({});\n    childRef.current.onFetchLabel();\n  };\n\n  return (\n    <div>\n    <Layout className=\"layout\">\n      <Header className=\"header\">\n        <div className=\"logo\">AR Wayfinding</div>\n        <div className=\"user\"></div>\n      </Header>\n      <Content style={{ padding: '0 15px', minHeight: '500px' }}>\n        <div className=\"site-layout-content\">\n          <div className=\"text\">Please scan a road sign to get navigation!</div>\n          <div className=\"loc\">You are now at: location{id}</div>\n          <div className=\"des\">Where is your destination?</div>\n          <select value={dest} onChange={(e)=>(setDest(e.target.value))}>\n            <option value=\"1\">Location 1</option>\n            <option value=\"2\">Location 2</option>\n            <option value=\"3\">Location 3</option>\n            <option value=\"4\">Location 4</option>\n          </select>\n\n          <Button onClick={handleClick}>Show direction</Button>\n\n          <div style = {show}>\n            The direction is: {angle}\n            <div className=\"container\">\n            <Picture source={id} destination={dest} ref={childRef}></Picture>\n            </div>\n          </div>\n\n          {/* <div className=\"camera\"><Button icon={<CameraOutlined />} onClick={()=>{props.history.push(\"/camera\")}}></Button></div> */}\n          <div className=\"camera\"><Button icon={<CameraOutlined />} onClick={()=>{window.location.href = `www.arcamera.com/?angle=${angle}`}}></Button></div>\n        </div>\n      </Content>\n          \n      <Footer style={{ textAlign: 'center' }}>AR Wayfinding Demo ©2021 Created by Stephen & Coco</Footer>\n    </Layout>\n    </div>\n  );\n}\n\nexport default withRouter(Home);\n","import React from 'react'\nimport { ArToolkitProfile, ArToolkitSource, ArToolkitContext, ArMarkerControls} from 'arjs/three.js/build/ar-threex.js';\nimport * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\n\nexport default class ThreexComp extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { 'compass': 0 };\n\t}\n\n    componentDidMount() {\n\t\tconsole.log(\"three:::props:::\",this.props);\n\n        ArToolkitContext.baseURL = './'\n        // init renderer\n\t    var renderer\t= new THREE.WebGLRenderer({\n\t\t    antialias\t: true,\n\t\t    alpha: true\n\t    });\n\t    renderer.setClearColor(new THREE.Color('lightgrey'), 0)\n\t    // renderer.setPixelRatio( 2 );\n\t    renderer.setSize( window.innerWidth, window.innerHeight );\n\t    renderer.domElement.style.position = 'absolute'\n\t    renderer.domElement.style.top = '0px'\n\t    renderer.domElement.style.left = '0px'\n\t    document.body.appendChild( renderer.domElement );\n\n\t    // array of functions for the rendering loop\n\t    var onRenderFcts= [];\n\n\t    // init scene and camera\n\t    var scene\t= new THREE.Scene();\n\n\t    //////////////////////////////////////////////////////////////////////////////////\n\t    //\t\tInitialize a basic camera\n\t    //////////////////////////////////////////////////////////////////////////////////\n\n\t    // Create a camera\n\t    var camera = new THREE.Camera();\n\t    scene.add(camera);\n        const artoolkitProfile = new ArToolkitProfile()\n\t    artoolkitProfile.sourceWebcam()\n\n\t    const arToolkitSource = new ArToolkitSource(artoolkitProfile.sourceParameters)\n\n        arToolkitSource.init(function onReady(){\n\t\t    onResize()\n\t    })\n\n\t    // handle resize\n\t    window.addEventListener('resize', function(){\n\t\t    onResize()\n\t    })\n\t    function onResize(){\n\t\t    arToolkitSource.onResizeElement()\n\t\t    arToolkitSource.copyElementSizeTo(renderer.domElement)\n\t\t    if( arToolkitContext.arController !== null ){\n\t\t\t    arToolkitSource.copyElementSizeTo(arToolkitContext.arController.canvas)\n\t\t    }\n\t    }\n\n        ////////////////////////////////////////////////////////////////////////////////\n\t    //          initialize arToolkitContext\n\t    ////////////////////////////////////////////////////////////////////////////////\n\n\t    // create atToolkitContext\n\t    var arToolkitContext = new ArToolkitContext({\n            cameraParametersUrl: ArToolkitContext.baseURL + '../../data/camera_para.dat',\n            detectionMode: 'mono',\n        })\n    \n\t    // initialize it\n\t    arToolkitContext.init(function onCompleted(){\n\t\t    // copy projection matrix to camera\n\t\t    camera.projectionMatrix.copy( arToolkitContext.getProjectionMatrix() );\n\t    })\n\n\t    // update artoolkit on every frame\n\t    onRenderFcts.push(function(){\n\t\t    if( arToolkitSource.ready === false )\treturn\n\n\t\t    arToolkitContext.update( arToolkitSource.domElement )\n\t    })\n\n\n        ////////////////////////////////////////////////////////////////////////////////\n\t    //          Create a ArMarkerControls\n\t    ////////////////////////////////////////////////////////////////////////////////\n\n\t    var markerGroup = new THREE.Group()\n\t    scene.add(markerGroup)\n\n\t    var markerControls = new ArMarkerControls(arToolkitContext, markerGroup, {\n\t\t    type : 'pattern',\n\t\t    patternUrl : ArToolkitContext.baseURL + '../../data/patt.hiro',\n\t    })\n\n\t    //////////////////////////////////////////////////////////////////////////////////\n\t    //\t\tadd an object in the scene\n\t    //////////////////////////////////////////////////////////////////////////////////\n\n\t    var markerScene = new THREE.Scene()\n\t    markerGroup.add(markerScene)\n\n\t\tconst loader = new GLTFLoader();\n\t\tvar model;\n\t\t\n\t\tloader.load( '../../data/arrow/scene.gltf', ( gltf ) => {\n\t\t\tgltf.scene.scale.set(0.5,1,1);\n\t\t\tmodel = gltf.scene;\n\t\t\tif(model){\n\t\t\t\tmodel.rotation.x = -1.2;\n\t\t\t\t// model.rotation.y = 1.57;\n\t\t\t\tmodel.rotation.y = 1.57-(this.props.angle)/57.29578;\n\t\t\t}\n\t\t\tmarkerScene.add( model );\n\t\t}, function ( xhr ) {\n\t\t\tconsole.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\n\t\t}, function ( error ) {\n\t\t\tconsole.error( error );\n\t\t} );\n\n\n        //////////////////////////////////////////////////////////////////////////////////\n\t    //\t\trender the whole thing on the page\n\t    //////////////////////////////////////////////////////////////////////////////////\n\t    onRenderFcts.push(()=>{\n\t\t    renderer.render( scene, camera );\n\t    })\n\n\n        // run the rendering loop\n\t    var lastTimeMsec= null\n\t    requestAnimationFrame(function animate(nowMsec){\n\t\t    // keep looping\n\t\t    requestAnimationFrame( animate );\n\t\t    // measure time\n\t\t    lastTimeMsec\t= lastTimeMsec || nowMsec-1000/60\n\t\t    var deltaMsec\t= Math.min(1000, nowMsec - lastTimeMsec)\n\t\t    lastTimeMsec\t= nowMsec\n\t\t    // call each update function\n\t\t    onRenderFcts.forEach(function(onRenderFct){\n\t\t\t    onRenderFct(deltaMsec/100, nowMsec/100)\n\t\t    })\n\t    })\n    }\n\t\n\n    render() {\n\t\tconsole.log(this.state);\n        return (\n        <div \n\t\t\tstyle={{ width: \"800px\", height: \"800px\" }}\n            ref={mount => { this.mount = mount}}\n        />\n        )\n    }       \n}","import './Camera.css';\n\nimport React, {useContext} from \"react\";\nimport { withRouter } from 'react-router-dom';\n\nimport ThreexComp from './ThreexComp';\nimport { AppContext } from \"../AppContext\";\n\n\nfunction Camera(props){\n\n  const {angle, settingAngle} = useContext(AppContext);\n  console.log(\"camera:::angle:::\",angle);\n\n  return (\n    <div>\n         <ThreexComp angle={angle}/>\n    </div>\n  );\n}\n\nexport default withRouter(Camera);","import './Dashboard.css';\nimport React, {useState} from \"react\";\n\nimport {\n  BrowserRouter as Router,\n  Link, \n  withRouter\n} from \"react-router-dom\";\n\nfunction Dashboard(props) {\n  const [loc, setLoc] = useState(0);\n\n  return (\n    <div>\n      <h2>Dashboard</h2>\n      <div>Please input your location</div>\n      <input onChange={(e)=>setLoc(e.target.value)}></input><br/>\n      <button onClick={()=>{props.history.push(\"/home/\"+loc);}}>Confirm</button>\n      <button onClick={()=>{props.history.push(\"/camera\");}}>(testing)Show Camera</button>\n    </div>\n  );\n}\n\nexport default withRouter(Dashboard);\n","import React, { useState, useMemo } from \"react\";\nimport {\n  HashRouter,\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport { AppContext } from \"./components/AppContext\";\n\nimport  Home  from './components/Home/Home';\n// import  ThreexComp  from \"./components/Camera/ThreexComp\"\nimport Camera from \"./components/Camera/Camera\";\nimport Dashboard from \"./components/Dashboard/Dashboard\";\n\nfunction App(props){\n  const [angle, setAngle] = useState(0);\n  const settingAngle = (v)=> {\n    setAngle(v);\n  }\n\n  return(\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\">\n          <Dashboard />\n        </Route>\n        <Route path=\"/home/:id\">\n        <AppContext.Provider value={{angle, settingAngle}}>\n          <Home /></AppContext.Provider>\n        </Route>\n        <Route path=\"/camera\">\n          <AppContext.Provider value={{angle, settingAngle}}>\n          <Camera /></AppContext.Provider>\n        </Route>\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from \"./App\"\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}